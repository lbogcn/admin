{"version":3,"sources":["restful.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"restful.js","sourcesContent":["define(['ajax', 'jquery'], function(ajax, $) {\r\n    var $backDrop;\r\n\r\n    function loading() {\r\n        $backDrop = $('<div class=\"modal-backdrop fade in\" style=\"z-index: 9999;\"></div>\\\r\n        <div style=\"position: fixed;top: 50%; left: 50%; background: #FFF; border: 1px #000 solid;z-index: 10000; padding: 5px;\">\\\r\n            <img src=\"/images/loading.gif\" alt=\"loading\">加载中...\\\r\n        </div>\\\r\n        ');\r\n\r\n        // 使当前激活的元素失去焦点，防止按住空格后，多次点击\r\n        document.activeElement.blur();\r\n\r\n        $('body').append($backDrop);\r\n    }\r\n\r\n    function removeLoading() {\r\n        $backDrop.remove();\r\n    }\r\n\r\n    return {\r\n        deny: function(url) {\r\n            if (confirm('确认禁用？')) {\r\n                loading();\r\n\r\n                ajax.apiPatch(url).done(function() {\r\n                    alert('操作成功，点击确定刷新页面！');\r\n                    window.location.reload();\r\n                }).always(function () {\r\n                    removeLoading();\r\n                });\r\n            }\r\n        },\r\n        restore: function(url) {\r\n            if (confirm('确认恢复？')) {\r\n                loading();\r\n\r\n                ajax.apiPatch(url).done(function() {\r\n                    alert('操作成功，点击确定刷新页面！');\r\n                    window.location.reload();\r\n                }).always(function () {\r\n                    removeLoading();\r\n                });\r\n            }\r\n        },\r\n        get: function (url, params) {\r\n            loading();\r\n\r\n            return ajax.apiGet(url, params).always(function () {\r\n                removeLoading();\r\n            });\r\n        },\r\n        post: function (url, params) {\r\n            loading();\r\n\r\n            ajax.apiPost(url, params).done(function() {\r\n                alert('操作成功，点击确定刷新页面！');\r\n                window.location.reload();\r\n            }).always(function () {\r\n                removeLoading();\r\n            });\r\n        },\r\n        put: function(url, params) {\r\n            loading();\r\n\r\n            ajax.apiPut(url, params).done(function() {\r\n                alert('操作成功，点击确定刷新页面！');\r\n                window.location.reload();\r\n            }).always(function () {\r\n                removeLoading();\r\n            });\r\n        },\r\n        patch: function(url, params) {\r\n            if (confirm('是否继续？')) {\r\n                loading();\r\n\r\n                ajax.apiPatch(url, params).done(function() {\r\n                    alert('操作成功，点击确定刷新页面！');\r\n                    window.location.reload();\r\n                }).always(function () {\r\n                    removeLoading();\r\n                });\r\n            }\r\n        },\r\n        del: function(url, params) {\r\n            if (confirm('确认删除？')) {\r\n                loading();\r\n\r\n                ajax.apiDelete(url, params).done(function() {\r\n                    alert('操作成功，点击确定刷新页面！');\r\n                    window.location.reload();\r\n                }).always(function () {\r\n                    removeLoading();\r\n                });\r\n            }\r\n        }\r\n    };\r\n});"]}